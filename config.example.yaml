# Taiwan Real Estate Smart Listing Notifier - Configuration
# Copy this file to config.yaml and fill in your values.
# CLI mode only — Bot mode uses /start templates or inline config.

# 搜尋條件
search:
  # 模式: "buy" (買房) 或 "rent" (租屋)
  mode: buy

  # 地區: 中文名稱或數字代碼皆可
  # 支援全台 22 縣市:
  #   台北市(1), 新北市(3), 基隆市(2), 桃園市(6),
  #   新竹市(4), 新竹縣(5), 苗栗縣(21),
  #   台中市(8), 彰化縣(10), 南投縣(11),
  #   雲林縣(12), 嘉義市(13), 嘉義縣(14),
  #   台南市(15), 高雄市(17), 屏東縣(19),
  #   宜蘭縣(22), 花蓮縣(23), 台東縣(24),
  #   澎湖縣(25), 金門縣(26), 連江縣(27)
  region: "台北市"

  # 行政區列表 (使用中文名稱)
  # 台北市: 中正區, 大同區, 中山區, 松山區, 大安區, 萬華區,
  #         信義區, 士林區, 北投區, 內湖區, 南港區, 文山區
  districts:
    - 南港區
    - 內湖區

  # 價格範圍
  # buy 模式: 單位為萬 (例: 2000 = 2000萬)
  # rent 模式: 單位為 NT$/月 (例: 30000 = 30000元/月)
  price:
    min: 2000
    max: 3000

  # 格局與坪數/屋齡範圍
  room_counts: []        # 可接受的房數 (例如 [2,3]，留空表示不限)
  bathroom_counts: []    # 可接受的衛浴數 (例如 [1,2]，留空表示不限)
  size:
    min_ping: 20         # 坪數下限；0 或省略表示不限
    max_ping: null       # 坪數上限；null 表示不限
  year_built:
    min: null            # 建造年份下限（YYYY），null 表示不限
    max: null            # 建造年份上限（YYYY），null 表示不限

  # 關鍵字篩選
  keywords:
    include: []      # 標題必須包含的所有關鍵字, e.g. ["電梯", "新裝潢"]
    exclude: []      # 標題包含任一即排除, e.g. ["頂樓", "分租"]

  # 爬蟲每次最多抓幾頁搜尋結果
  max_pages: 3

# Telegram 通知設定
telegram:
  bot_token: "YOUR_BOT_TOKEN_HERE"  # 從 @BotFather 取得
  chat_id: "YOUR_CHAT_ID_HERE"      # 你的 chat ID 或 group ID

# Google Maps 縮圖 (可選功能)
maps:
  enabled: false               # 打開後會在通知中附上地圖縮圖
  api_key: "YOUR_MAPS_API_KEY"  # Google Maps API key
  base_url: "https://maps.googleapis.com/maps/api/staticmap"
  size: "640x400"               # 寬x高，pixel
  zoom: null                    # 預設自動；可填 14~18
  scale: 2                      # 1 或 2 (retina)
  language: "zh-TW"
  region: "tw"
  timeout: 6                    # 請求逾時秒數
  cache_ttl_seconds: 86400      # 縮圖與 geocode 緩存時間（秒）
  cache_dir: "data/map_cache"   # 緩存檔案存放路徑
  style: null                   # 可填自訂 style 參數

# 資料庫設定
database:
  path: "data/homedog.db"

# 爬蟲設定
scraper:
  # 每次請求之間的隨機延遲範圍 (秒)
  delay_min: 2
  delay_max: 5
  # HTTP 請求 timeout (秒)
  timeout: 30
  # 失敗重試次數
  max_retries: 3

# 物件去重設定
dedup:
  enabled: true          # 是否啟用去重
  threshold: 0.82        # 判定同一物件的分數門檻 (0~1)
  price_tolerance: 0.05  # 價格相對容忍度
  size_tolerance: 0.08   # 坪數相對容忍度
  cleanup_batch_size: 200
